<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../firebase-element/firebase-element.html">
<link rel="import" href="../../mark-down/mark-down.html">

<link rel="import" href="speakur-card.html">

<polymer-element name="speakur-post" attributes="firebaseLocation threadId postId">
    <template>
        <style>
        </style>
        <firebase-element
                id="base" data="{{post}}"
                location="{{firebaseLocation}}/posts/{{threadId}}/{{postId}}"></firebase-element>
        <speakur-card>
            <div class="header">
                <button on-click="{{deletePost}}">Delete</button>
                User: {{post.author.username}}
                <small>{{post.timestamp | formatTimestamp}}</small>
            </div>
            <div class="body">
                <mark-down text="{{post.text}}">
                </mark-down>
            </div>
        </speakur-card>
    </template>
    <script>
        Polymer({
            deletePost: function (event, detail, sender) {
                console.log("Deleting post: ", this.postId, this.post);
                this.$.base.remove("/");
            }
        });
    </script>
</polymer-element>
