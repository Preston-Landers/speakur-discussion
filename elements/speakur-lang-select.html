    <!--
Copyright (c) 2015 Preston Landers. All rights reserved.
This code may only be used under the BSD style license found at http://speakur.github.io/LICENSE.txt
The complete set of authors may be found at http://speakur.github.io/AUTHORS.txt
The complete set of contributors may be found at http://speakur.github.io/CONTRIBUTORS.txt
-->
<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../paper-dropdown/paper-dropdown.html">
<link rel="import" href="../../paper-item/paper-item.html">
<link rel="import" href="../../core-menu/core-menu.html">


<polymer-element
    name="speakur-lang-select"
    attributes="locale"
    extends="speakur-base">
    <template>
        <style>
            paper-item.core-selected {
                color: red;
            }
        </style>

        <paper-dropdown-menu class="">
            <paper-dropdown class="speakur-paper-dropdown dropdown" transition="" layered>
                <core-menu id="menu" class="menu">
                    <paper-item data-locale="en-US">English</paper-item>
                    <paper-item data-locale="fr-FR">Fran√ßais</paper-item>
                </core-menu>
            </paper-dropdown>
        </paper-dropdown-menu>

    </template>
    <script>
        Polymer({
            locale: null,

            domReady: function () {
                var that = this;

                // I'm pretty sure there has to be a better way to do this?
                this.$.menu.addEventListener('core-select', function (e) {
                    if (e.detail.isSelected) {
                        var newLocale = e.detail.item.dataset['locale'];
                        that.locale = newLocale;
                        // that.log("Changed locale to: ", newLocale);
                    }
                });
            },

            observe: {
                locale: 'localeChanged'
            },

            localeChanged: function (oldVal, newVal) {
                // this.log("locale changed from:", oldVal, " to: ", newVal);
                this.fire('speakur-locale-change', {oldLocale: oldVal, newLocale: newVal});
            }

        });
    </script>
</polymer-element>
