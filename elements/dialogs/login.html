<!--
Copyright (c) 2015 Preston Landers. All rights reserved.
This code may only be used under the BSD style license found at http://speakur.github.io/LICENSE.txt
The complete set of authors may be found at http://speakur.github.io/AUTHORS.txt
The complete set of contributors may be found at http://speakur.github.io/CONTRIBUTORS.txt
-->
<link rel="import" href="../../../polymer/polymer.html">
<link rel="import" href="../../../paper-button/paper-button.html">
<link rel="import" href="../../../core-icon/core-icon.html">

<!-- NOTE: the presence of this plugin on the page with Firefox + Ad Block Plus plugin
     will cause the entire page to not load.-->
<link rel="import" href="../../../core-icons/social-icons.html">


<polymer-element name="speakur-dialog-login" attributes="baseLogin">
    <template>
        <style>
            :host {
                /*
                                max-width: 800px;
                font-family: "RobotoDraft", "Calibri", Helvetica, Arial, sans-serif;
                */
                max-width: 800px;
                font-size: 14px;
                color: black;
                background-color: white;
            }

            .login-button {
                width: 250px;
                height: 40px;
                background-repeat: no-repeat;
                background-size: contain;
                margin: 10px;
            }

            .login-button-facebook {
                background-image: url("../../images/facebook-login-button.png");
            }

            .login-button-google {
                background-image: url("../../images/google-sign-in-button.png");
            }
        </style>
        <link rel="stylesheet" href="../../../bootstrap/dist/css/bootstrap.min.css">

        <div class="loginContainer">

            <div id="loginDialog" class="modal fade">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">Sign in to Speakur</h4>
                        </div>
                        <div class="modal-body">
                            <p>Please sign in with one of the following identity providers. You will be able to change
                                the name you post under.
                            </p>

                            <p>
                                Your email address will be shared with Speakur but no other private data will be shared.
                            </p>

                            <p>
                                You can only be signed in with one service at a time.
                            </p>

                            <div layout horizontal>
                                <div
                                        class="login-button login-button-facebook"
                                        title="Sign in with Facebook"
                                        on-click="{{loginFacebook}}"
                                        >

                                </div>
                                <div
                                        class="login-button login-button-google"
                                        title="Sign in with Google"
                                        on-click="{{loginGoogle}}"
                                        >
                                </div>

                            </div>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
            <!-- /.modal -->
        </div>
    </template>
<!--
    <script src="../../../jquery/dist/jquery.min.js"></script>
-->
    <script>
        (function () {
            Polymer({
                toggle: function () {
                    // this.$["loginDialog"].toggle();
                    jQuery(this.$.loginDialog).modal('toggle');
                },
                loginGoogle: function () {
                    console.log('LOGIN with Google!');
                    this.baseLogin.provider = 'google';
                    this.toggle();
                    this.baseLogin.login({
                        remember: "default",
                        scope: "email"
                    });
                },

                loginFacebook: function () {
                    console.log('LOGIN with Facebook!');
                    this.baseLogin.provider = 'facebook';
                    this.toggle();
                    this.baseLogin.login({
                        remember: "default",
                        scope: "email"
                    });
                }

                // TODO: reflect 'opened' as a property?  Or provide a closeIfOpen method?

            });
        })();
    </script>
</polymer-element>
