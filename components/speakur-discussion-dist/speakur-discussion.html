<link rel="import" href="speakur-import.html"><polymer-element name="speakur-discussion" extends="speakur-base" attributes="theme href moderators xtitle firebaseLocation initiallyOpen openAnimMS maxWidth allowAnonymous recordIP"><template><link rel="stylesheet" href="speakur-discussion.css"><template if="{{ !theme || theme == 'speakur-theme-grey'}}"><speakur-theme-grey></speakur-theme-grey></template><template if="{{ theme == 'speakur-theme-blue'}}"><speakur-theme-blue></speakur-theme-blue></template><template if="{{ theme == 'speakur-theme-red'}}"><speakur-theme-red></speakur-theme-red></template><core-style ref="speakur-theme"></core-style><div id="speakur-container" class="speakur-container {{ closed ? 'closed' : '' }}"><firebase-login id="baseLogin" user="{{user}}" statusknown="{{statusKnown}}" location="{{firebaseLocation}}" provider="google" on-login="{{onLogin}}" on-error="{{onLoginError}}"></firebase-login><paper-toast id="speakur-toast"></paper-toast><speakur-dialog-login id="speakurLoginDialog" baselogin="{{$.baseLogin}}"></speakur-dialog-login><speakur-profile id="speakurProfile" profile="{{ profile }}" uid="{{ statusKnown && user.uid }}" threadid="{{ threadId }}" firebaselocation="{{ firebaseLocation }}"></speakur-profile><speakur-dialog-profile-edit profile="{{profile}}" id="profileEditDialog"></speakur-dialog-profile-edit><speakur-i18next id="si18next" locale="{{ currentLocale }}"></speakur-i18next><template if="{{ recordIP }}"><core-shared-lib on-core-shared-lib-load="{{loadIP}}" url="//freegeoip.net/json/?callback=%%callback%%"></core-shared-lib></template><div vertical="" layout="" class="speakur-layout"><div class="toolbar-border curved-small speakur-header-bar {{ closed ? 'speakur-header-bar-closed' : '' }}"><div horizontal="" center="" layout="" wrap="" class="speakur-toolbar speakur-toolbar-header"><template if="{{ closed }}"><paper-icon-button icon="speaker-notes" title="{{ 'show_comments' | $$(lc) }}" on-click="{{toggle}}"></paper-icon-button><div class="speakur-header-titlebox speakur-toggle-link" on-click="{{toggle}}" flex="">{{ 'View Comments' | $$(lc) }} ({{ $.threadView.replyCountDeep }})</div><speakur-login-button style="margin-right: 6px;" user="{{user}}" statusknown="{{statusKnown}}"></speakur-login-button></template><template if="{{ !closed }}"><paper-icon-button title="{{ 'Hide' | $$(lc) }}" icon="remove-circle-outline" on-click="{{toggle}}" class="speakur-toggle-button speakur-close-button"></paper-icon-button><div flex="" class="speakur-header-titlebox">{{xtitle}} &mdash; {{ 'replies_count' | $$({count: $.threadView.replyCountDeep}, lc) }}</div><div class="admin-mode" hidden?="{{!statusKnown || !globals.isAdmin}}">{{ 'Admin Mode' | $$(lc) }}</div><speakur-login-button user="{{user}}" statusknown="{{statusKnown}}"></speakur-login-button></template></div></div><core-collapse id="mainCollapse"><div class="speakur-body-container"><speakur-thread-view id="threadView" threadid="{{threadId}}" xtitle="{{xtitle}}" href="{{href}}" allowanonymous="{{allowAnonymous}}" firebaselocation="{{firebaseLocation}}"></speakur-thread-view></div><div class="toolbar-border curved-small"><div horizontal="" center="" layout="" wrap="" class="speakur-toolbar speakur-toolbar-footer"><paper-icon-button title="{{ 'Hide' | $$(lc) }}" icon="remove-circle-outline" on-click="{{toggle}}" class="speakur-toggle-button speakur-close-button"></paper-icon-button><div class="powered-by-link"><a target="_blank" href="{{speakurSoftwareLink}}">{{ 'powered_by' | $$(lc) }}</a></div><div flex="" class="speakur-copyright"><small>{{ 'copyright_stmt' | $$(lc) }}</small></div><paper-icon-button id="reportbutton" on-click="{{reportProblem}}" title="{{ 'report_a_problem' | $$(lc) }}" icon="report-problem"></paper-icon-button></div></div></core-collapse></div></div></template><script src="speakur-discussion.js"></script></polymer-element><core-style ref="speakur-theme-page"></core-style>